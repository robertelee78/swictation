# Swictation - Voice Dictation System for Sway/Wayland
# Successfully tested on Python 3.12-3.13 with NVIDIA RTX A1000 (CUDA 12.9)
#
# INSTALLATION:
# For Python 3.13+, install in this order to avoid numpy conflict:
#   1. pip3 install --break-system-packages torch torchaudio
#   2. pip3 install --break-system-packages -r requirements.txt
#
# The issue: nemo_toolkit[asr]==2.5.2 declares numpy<2.0.0 but works fine with 2.x
# Solution: Install PyTorch first (which brings numpy 2.x), then install nemo without [asr]

# Core ML Framework - PyTorch with CUDA support
# IMPORTANT: Install PyTorch FIRST before other dependencies to avoid conflicts
# Python 3.13 requires numpy>=2.1.0 but nemo_toolkit[asr] incorrectly declares numpy<2.0.0
torch>=2.1.0
torchaudio>=2.1.0

# NVIDIA NeMo for Canary-1B-Flash STT
# NOTE: Install WITHOUT [asr] extra to avoid numpy<2.0 constraint
# The asr dependencies are included manually below
nemo_toolkit==2.5.2
numpy>=1.26.0  # Works with both numpy 1.x and 2.x despite NeMo's incorrect [asr] constraint

# Audio Processing
sounddevice==0.5.3
soundfile==0.13.1
librosa==0.11.0

# NeMo Dependencies
# Transformers ecosystem
huggingface-hub==0.36.0
tokenizers==0.21.0
accelerate==1.11.0
safetensors==0.6.2
transformers>=4.53.0  # Relaxed from ~=4.53.0 to allow latest versions

# Neural network training
pytorch-lightning==2.5.5
lightning-utilities==0.15.2
torchmetrics>=1.0.0,<2.0.0

# Data processing
datasets==4.3.0
pandas==2.3.3
pyarrow==22.0.0
dill==0.4.0
multiprocess==0.70.16
xxhash==3.6.0

# Audio & speech processing
lhotse==1.31.1
intervaltree==3.1.0
cytoolz==1.1.0
lilcom==1.8.1
tabulate==0.9.0

# Text error analysis
texterrors<1.0.0
Levenshtein==0.27.1
termcolor==3.2.0
plac==1.4.5

# Configuration management
fsspec==2024.12.0
omegaconf>=2.3.0
hydra-core>=1.3.0
pyyaml>=6.0
toml==0.10.2

# ONNX export
onnx>=1.15.0
ml_dtypes==0.5.3

# Logging & telemetry
tensorboard==2.20.0
tensorboard-data-server==0.7.2
werkzeug==3.1.3
grpcio==1.76.0
absl-py==2.3.1

# NV One Logger
StrEnum==0.4.15
overrides==7.7.0
setuptools==80.9.0

# Graph utilities
graphviz==0.21
libcst==1.8.5

# Annotation tools
pyannote.core==5.0.0
pyannote.metrics==3.2.1
pyannote-database==5.1.0
sortedcontainers==2.4.0

# Build dependencies
pybind11==3.0.1
rapidfuzz>=3.9.0

# Text Processing Pipeline (TODO: for future midstream integration)
# midstream>=0.1.0

# UI (system tray)
PySide6>=6.8.0

# IPC and system integration (TODO: for daemon implementation)
# dbus-python>=1.3.2
